# Architecture of fm_chat_ui

## Overview

fm_chat_ui is a React application that provides a chat interface for interacting with various Large Language Models (LLMs). The application is structured as follows:

## Key Components

*   **src/App.jsx:** The main component of the application. It initializes the LLM service, registers tools, and renders the main UI.
*   **src/components:** This directory contains the React components used in the application, such as `Header`, `LLMChat`, `Log`, `Spinner`, and `ProgressText`.
*   **src/redux:** This directory contains the Redux store and slices for managing the application state. The `appSlice` manages the application's general state, such as the schema and logs, while the `llmSlice` manages the LLM-related state, such as the provider and API key.
*   **src/services/llm:** This directory contains the LLM service implementations for different providers, such as OpenAI, Anthropic, Deepseek, Gemini, and Ollama. The `LLMServiceFactory` class is responsible for creating and initializing the LLM services.
*   **src/services/llm/tools:** This directory contains the tools that can be used by the LLM services. The `registerTools` function registers the tools with the LLM service.
*   **src/utils:** This directory contains utility functions, such as `filemaker.js` for interacting with FileMaker databases and `providerEndpoints.js` for defining the API endpoints for different LLM providers.

## High-Level Interactions

1.  The `App` component initializes the LLM service based on the `llmSettings.provider` value.
2.  The `LLMServiceFactory` creates and initializes the LLM service implementation for the selected provider.
3.  The `registerTools` function registers the tools with the LLM service.
4.  The `LLMChat` component allows the user to interact with the LLM service.
5.  The `Log` component displays logs generated by the application.
6.  The Redux store manages the application state and dispatches actions to update the state.

## Data Flow

1.  The user interacts with the `LLMChat` component.
2.  The `LLMChat` component sends a message to the LLM service.
3.  The LLM service processes the message and returns a response.
4.  The `LLMChat` component displays the response to the user.
5.  The application logs events to the `Log` component.
6.  The Redux store updates the application state based on user interactions and LLM service responses.